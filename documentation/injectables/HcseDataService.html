<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>hcse-website documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">hcse-website documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >HcseDataService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/hcse-data.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#are_articles_loading" >are_articles_loading</a>
                            </li>
                            <li>
                                <a href="#are_keywords_loading" >are_keywords_loading</a>
                            </li>
                            <li>
                                <a href="#article_ratings" >article_ratings</a>
                            </li>
                            <li>
                                <a href="#average_rating" >average_rating</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#baseUrl" >baseUrl</a>
                            </li>
                            <li>
                                <a href="#db" >db</a>
                            </li>
                            <li>
                                <a href="#dbIsLoading" >dbIsLoading</a>
                            </li>
                            <li>
                                <a href="#dbIsReady" >dbIsReady</a>
                            </li>
                            <li>
                                <a href="#hallmark_names" >hallmark_names</a>
                            </li>
                            <li>
                                <a href="#hallmarks" >hallmarks</a>
                            </li>
                            <li>
                                <a href="#keyword_ratings" >keyword_ratings</a>
                            </li>
                            <li>
                                <a href="#n_articles" >n_articles</a>
                            </li>
                            <li>
                                <a href="#n_hallmarks" >n_hallmarks</a>
                            </li>
                            <li>
                                <a href="#n_keywords" >n_keywords</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#cacheFile" >cacheFile</a>
                            </li>
                            <li>
                                <a href="#complete_hallmark_descriptions" >complete_hallmark_descriptions</a>
                            </li>
                            <li>
                                <a href="#fetchArticles" >fetchArticles</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#findClosestObjects" >findClosestObjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#findClosestObjectsForSearchTerm" >findClosestObjectsForSearchTerm</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#get_keyword_rating" >get_keyword_rating</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#get_keywords_for_text" >get_keywords_for_text</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#get_rating_for_text" >get_rating_for_text</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getAuthorList" >getAuthorList</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#getCachedFile" >getCachedFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getTextContent" >getTextContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#initialize" >initialize</a>
                            </li>
                            <li>
                                <a href="#initialize_for_test_framework" >initialize_for_test_framework</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#isFileCached" >isFileCached</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#load_keyword_dictionary" >load_keyword_dictionary</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#load_publication_database" >load_publication_database</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseArticle" >parseArticle</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseXml" >parseXml</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#prepareDatabase" >prepareDatabase</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: HttpClient)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/hcse-data.service.ts:38</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                    <code>HttpClient</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cacheFile"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>cacheFile</b></span>
                        <a href="#cacheFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>cacheFile(filename: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, blob: Blob)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="180"
                                    class="link-to-prism">src/app/hcse-data.service.ts:180</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filename</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>blob</td>
                                            <td>
                                                        <code>Blob</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="complete_hallmark_descriptions"></a>
                    <span class="name">
                        <span ><b>complete_hallmark_descriptions</b></span>
                        <a href="#complete_hallmark_descriptions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>complete_hallmark_descriptions(input: <a href="../classes/HallmarkDescription.html" target="_self">HallmarkDescription[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="83"
                                    class="link-to-prism">src/app/hcse-data.service.ts:83</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>input</td>
                                            <td>
                                                            <code><a href="../classes/HallmarkDescription.html" target="_self" >HallmarkDescription[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/HallmarkDescription.html" target="_self" >HallmarkDescription[]</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchArticles"></a>
                    <span class="name">
                        <span ><b>fetchArticles</b></span>
                        <a href="#fetchArticles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>fetchArticles(ids: string[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="222"
                                    class="link-to-prism">src/app/hcse-data.service.ts:222</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>ids</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/PubmedArticle.html" target="_self" >Observable&lt;PubmedArticle[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findClosestObjects"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>findClosestObjects</b></span>
                        <a href="#findClosestObjects"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findClosestObjects(inputVector: number[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="199"
                                    class="link-to-prism">src/app/hcse-data.service.ts:199</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>inputVector</td>
                                            <td>
                                                        <code>number[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/ArticleListCollection.html" target="_self" >ArticleListCollection</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findClosestObjectsForSearchTerm"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>findClosestObjectsForSearchTerm</b></span>
                        <a href="#findClosestObjectsForSearchTerm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findClosestObjectsForSearchTerm(searchString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="212"
                                    class="link-to-prism">src/app/hcse-data.service.ts:212</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>searchString</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/ArticleListCollection.html" target="_self" >ArticleListCollection</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="get_keyword_rating"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>get_keyword_rating</b></span>
                        <a href="#get_keyword_rating"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>get_keyword_rating(in_keyword: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="42"
                                    class="link-to-prism">src/app/hcse-data.service.ts:42</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>in_keyword</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/KeywordRating.html" target="_self" >KeywordRating</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="get_keywords_for_text"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>get_keywords_for_text</b></span>
                        <a href="#get_keywords_for_text"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>get_keywords_for_text(text: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="114"
                                    class="link-to-prism">src/app/hcse-data.service.ts:114</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>text</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>string[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="get_rating_for_text"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>get_rating_for_text</b></span>
                        <a href="#get_rating_for_text"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>get_rating_for_text(text: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="125"
                                    class="link-to-prism">src/app/hcse-data.service.ts:125</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>text</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>number[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAuthorList"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getAuthorList</b></span>
                        <a href="#getAuthorList"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAuthorList(xmlDoc: Element)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="269"
                                    class="link-to-prism">src/app/hcse-data.service.ts:269</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>xmlDoc</td>
                                            <td>
                                                        <code>Element</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>string[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCachedFile"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>getCachedFile</b></span>
                        <a href="#getCachedFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCachedFile(filename: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="189"
                                    class="link-to-prism">src/app/hcse-data.service.ts:189</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filename</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;Blob&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTextContent"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getTextContent</b></span>
                        <a href="#getTextContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTextContent(xmlDoc: Element, tagName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="264"
                                    class="link-to-prism">src/app/hcse-data.service.ts:264</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>xmlDoc</td>
                                            <td>
                                                        <code>Element</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tagName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initialize"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>initialize</b></span>
                        <a href="#initialize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initialize()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="57"
                                    class="link-to-prism">src/app/hcse-data.service.ts:57</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initialize_for_test_framework"></a>
                    <span class="name">
                        <span ><b>initialize_for_test_framework</b></span>
                        <a href="#initialize_for_test_framework"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>initialize_for_test_framework(articles: <a href="../classes/RatingIdPair.html" target="_self">RatingIdPair[]</a>, keywords: <a href="../classes/RatingFile.html" target="_self">RatingFile</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="62"
                                    class="link-to-prism">src/app/hcse-data.service.ts:62</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>articles</td>
                                            <td>
                                                            <code><a href="../classes/RatingIdPair.html" target="_self" >RatingIdPair[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>keywords</td>
                                            <td>
                                                            <code><a href="../classes/RatingFile.html" target="_self" >RatingFile</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFileCached"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>isFileCached</b></span>
                        <a href="#isFileCached"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isFileCached(filename: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="170"
                                    class="link-to-prism">src/app/hcse-data.service.ts:170</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filename</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="load_keyword_dictionary"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>load_keyword_dictionary</b></span>
                        <a href="#load_keyword_dictionary"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>load_keyword_dictionary()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="95"
                                    class="link-to-prism">src/app/hcse-data.service.ts:95</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="load_publication_database"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>load_publication_database</b></span>
                        <a href="#load_publication_database"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>load_publication_database()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="68"
                                    class="link-to-prism">src/app/hcse-data.service.ts:68</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseArticle"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseArticle</b></span>
                        <a href="#parseArticle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseArticle(xmlDoc: Element)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="252"
                                    class="link-to-prism">src/app/hcse-data.service.ts:252</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>xmlDoc</td>
                                            <td>
                                                        <code>Element</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/PubmedArticle.html" target="_self" >PubmedArticle</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseXml"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseXml</b></span>
                        <a href="#parseXml"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseXml(xmlString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ids: string[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="238"
                                    class="link-to-prism">src/app/hcse-data.service.ts:238</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>xmlString</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>ids</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/PubmedArticle.html" target="_self" >PubmedArticle[]</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="prepareDatabase"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>prepareDatabase</b></span>
                        <a href="#prepareDatabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>prepareDatabase()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="150"
                                    class="link-to-prism">src/app/hcse-data.service.ts:150</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="are_articles_loading"></a>
                    <span class="name">
                        <span ><b>are_articles_loading</b></span>
                        <a href="#are_articles_loading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;boolean&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.n_articles() &#x3D;&#x3D; 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/hcse-data.service.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="are_keywords_loading"></a>
                    <span class="name">
                        <span ><b>are_keywords_loading</b></span>
                        <a href="#are_keywords_loading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;boolean&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.n_keywords() &#x3D;&#x3D; 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/app/hcse-data.service.ts:20</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="article_ratings"></a>
                    <span class="name">
                        <span ><b>article_ratings</b></span>
                        <a href="#article_ratings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/RatingIdPair.html" target="_self" >WritableSignal&lt;RatingIdPair[]&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/hcse-data.service.ts:17</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="average_rating"></a>
                    <span class="name">
                        <span ><b>average_rating</b></span>
                        <a href="#average_rating"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;number[]&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    let ret &#x3D; [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    for (const article of this.article_ratings()) {
      for (let comp &#x3D; 0; comp &lt; ret.length; comp++) {
        ret[comp] +&#x3D; article.r[comp];
      }
    }
    for (let comp &#x3D; 0; comp &lt; ret.length; comp++) {
      ret[comp] /&#x3D; this.article_ratings().length;
    }
    return ret;
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/hcse-data.service.ts:25</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="baseUrl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>baseUrl</b></span>
                        <a href="#baseUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/hcse-data.service.ts:38</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="db"></a>
                    <span class="name">
                        <span ><b>db</b></span>
                        <a href="#db"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{}</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/hcse-data.service.ts:15</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dbIsLoading"></a>
                    <span class="name">
                        <span ><b>dbIsLoading</b></span>
                        <a href="#dbIsLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/hcse-data.service.ts:14</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dbIsReady"></a>
                    <span class="name">
                        <span ><b>dbIsReady</b></span>
                        <a href="#dbIsReady"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/app/hcse-data.service.ts:13</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hallmark_names"></a>
                    <span class="name">
                        <span ><b>hallmark_names</b></span>
                        <a href="#hallmark_names"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;string[]&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.hallmarks().map(h &#x3D;&gt; h.title))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/hcse-data.service.ts:19</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hallmarks"></a>
                    <span class="name">
                        <span ><b>hallmarks</b></span>
                        <a href="#hallmarks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/HallmarkDescription.html" target="_self" >WritableSignal&lt;HallmarkDescription[]&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/app/hcse-data.service.ts:18</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="keyword_ratings"></a>
                    <span class="name">
                        <span ><b>keyword_ratings</b></span>
                        <a href="#keyword_ratings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/KeywordDictionary.html" target="_self" >WritableSignal&lt;KeywordDictionary&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal({})</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/app/hcse-data.service.ts:16</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="n_articles"></a>
                    <span class="name">
                        <span ><b>n_articles</b></span>
                        <a href="#n_articles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;number&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.article_ratings().length)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="22" class="link-to-prism">src/app/hcse-data.service.ts:22</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="n_hallmarks"></a>
                    <span class="name">
                        <span ><b>n_hallmarks</b></span>
                        <a href="#n_hallmarks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;number&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.hallmarks().length)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/hcse-data.service.ts:23</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="n_keywords"></a>
                    <span class="name">
                        <span ><b>n_keywords</b></span>
                        <a href="#n_keywords"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;number&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; Object.keys(this.keyword_ratings()).length)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/app/hcse-data.service.ts:24</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, WritableSignal, Signal, signal, computed } from &#x27;@angular/core&#x27;;
import { HttpClient, HttpParams } from &#x27;@angular/common/http&#x27;;
import { openDB } from &#x27;idb&#x27;;
import { ArticleListItem, HallmarkDescription, KeywordDictionary, KeywordRating, PubmedArticle, RatingFile, RatingIdPair, euclideanDistance, json_to_blob, keyword_ratings_to_dictionary, norm_of_vector, norm_vector, split_input_into_possible_keywords } from &#x27;./util&#x27;;
import { Observable, map } from &#x27;rxjs&#x27;;
import { ArticleListCollection } from &#x27;./article-list&#x27;;
const DATABASE_NAME &#x3D; &#x27;HCSEFileCache&#x27;;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class HcseDataService {
  dbIsReady: boolean &#x3D; false;
  dbIsLoading: boolean &#x3D; false;
  db: any &#x3D; {};
  keyword_ratings: WritableSignal&lt;KeywordDictionary&gt; &#x3D; signal({});
  article_ratings: WritableSignal&lt;RatingIdPair[]&gt; &#x3D; signal([]);
  hallmarks: WritableSignal&lt;HallmarkDescription[]&gt; &#x3D; signal([]);
  hallmark_names: Signal&lt;string[]&gt; &#x3D; computed(() &#x3D;&gt; this.hallmarks().map(h &#x3D;&gt; h.title));
  are_keywords_loading: Signal&lt;boolean&gt; &#x3D; computed(() &#x3D;&gt; this.n_keywords() &#x3D;&#x3D; 0);
  are_articles_loading: Signal&lt;boolean&gt; &#x3D; computed(() &#x3D;&gt; this.n_articles() &#x3D;&#x3D; 0);
  n_articles: Signal&lt;number&gt; &#x3D; computed(() &#x3D;&gt; this.article_ratings().length);
  n_hallmarks: Signal&lt;number&gt; &#x3D; computed(() &#x3D;&gt; this.hallmarks().length);
  n_keywords: Signal&lt;number&gt; &#x3D; computed(() &#x3D;&gt; Object.keys(this.keyword_ratings()).length);
  average_rating: Signal&lt;number[]&gt; &#x3D; computed(() &#x3D;&gt; {
    let ret &#x3D; [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    for (const article of this.article_ratings()) {
      for (let comp &#x3D; 0; comp &lt; ret.length; comp++) {
        ret[comp] +&#x3D; article.r[comp];
      }
    }
    for (let comp &#x3D; 0; comp &lt; ret.length; comp++) {
      ret[comp] /&#x3D; this.article_ratings().length;
    }
    return ret;
  });

  private baseUrl &#x3D; &#x27;https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi&#x27;;

  constructor(private http: HttpClient) { }

  public get_keyword_rating(in_keyword: string): KeywordRating {
    const keyword &#x3D; in_keyword.trim();
    let ret: { keyword: string, rating: number[] } &#x3D; {
      keyword, rating: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
    if (this.are_keywords_loading()) {
      return ret;
    } else {
      const r &#x3D; (this.keyword_ratings())[keyword];
      if (!r) return ret;
      ret.rating &#x3D; r;
    }
    return ret;
  }

  async initialize() {
    await this.load_keyword_dictionary();
    await this.load_publication_database();
  }

  initialize_for_test_framework(articles: RatingIdPair[], keywords: RatingFile) {
    this.article_ratings.set(articles);
    this.keyword_ratings.set(keyword_ratings_to_dictionary(keywords.rating_output));
    this.hallmarks.set(keywords.hallmarks);
  }

  async load_publication_database() {
    const fname &#x3D; &quot;article_database.json&quot;;
    if (await this.isFileCached(fname)) {
      let data &#x3D; await this.getCachedFile(fname);
      this.article_ratings.set(JSON.parse(await data.text()));
      console.log(this.article_ratings().length + &quot; articles found.&quot;);
    } else {
      this.http.get&lt;RatingIdPair[]&gt;(&#x27;/assets/&#x27; + fname).subscribe((data) &#x3D;&gt; {
        this.article_ratings.set(data);
        this.cacheFile(fname, json_to_blob(data));
        console.log(this.article_ratings().length + &quot; articles found.&quot;);
      });
    }
  }

  complete_hallmark_descriptions(input: HallmarkDescription[]): HallmarkDescription[] {
    let ret &#x3D; JSON.parse(JSON.stringify(input)) as HallmarkDescription[];
    for (let i &#x3D; 0; i &lt; ret.length; i++) {
      ret[i].h &#x3D; Math.floor(i * 36);
      ret[i].s &#x3D; 100;
      ret[i].l &#x3D; 50;
      ret[i].hsl_string &#x3D; &quot;hsl(&quot; + ret[i].h + &quot;, &quot; + ret[i].s + &quot;%, &quot; + ret[i].l + &quot;%);&quot;;
      ret[i].keywords &#x3D; this.get_keywords_for_text(ret[i].description);
    }
    return ret;
  }

  async load_keyword_dictionary() {
    const fname &#x3D; &quot;rating_database.json&quot;;
    if (await this.isFileCached(fname)) {
      let data &#x3D; await this.getCachedFile(fname);
      let data_text &#x3D; await data.text();
      let obj &#x3D; JSON.parse(data_text) as RatingFile;
      this.keyword_ratings.set(keyword_ratings_to_dictionary(obj.rating_output));
      console.log(this.n_keywords() + &quot; keywords found.&quot;);
      this.hallmarks.set(this.complete_hallmark_descriptions(obj.hallmarks));
      console.log(this.n_hallmarks() + &quot; hallmarks found.&quot;);
    } else {
      this.http.get&lt;RatingFile&gt;(&#x27;/assets/&#x27; + fname).subscribe((data) &#x3D;&gt; {
        this.keyword_ratings.set(keyword_ratings_to_dictionary(data.rating_output));
        this.hallmarks.set(this.complete_hallmark_descriptions(data.hallmarks));
        this.cacheFile(fname, json_to_blob(data));
      });
    }
  }

  public get_keywords_for_text(text: string): string[] {
    let ret: string[] &#x3D; [];
    const words &#x3D; split_input_into_possible_keywords(text);
    words.forEach(w &#x3D;&gt; {
      if (this.keyword_ratings()[w]) {
        ret.push(w);
      }
    });
    return ret;
  }

  public get_rating_for_text(text: string): number[] {
    const keywords &#x3D; split_input_into_possible_keywords(text, false);
    let rating &#x3D; [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    const wordCounts: { [key: string]: number } &#x3D; {};
    for (const word of keywords) {
      if (word in wordCounts) {
        wordCounts[word]++;
      } else {
        wordCounts[word] &#x3D; 1;
      }
    }

    for (const word in wordCounts) {
      const keyword_rating: KeywordRating &#x3D; this.get_keyword_rating(word);
      const factor &#x3D; Math.sqrt(wordCounts[word]);
      // we could check here if the word has a rating but this way we simply add zero. Same effect.
      for (let i &#x3D; 0; i &lt; 10; i++) {
        rating[i] +&#x3D; keyword_rating.rating[i] * factor;
      }
    }
    const computed_rating &#x3D; norm_vector(rating);
    return computed_rating;
  }


  public async prepareDatabase() {
    if (this.dbIsReady) {
      return;
    }
    if (this.dbIsLoading) {
      while (this.dbIsLoading) {
        await new Promise((resolve) &#x3D;&gt; setTimeout(resolve, 100));
      }
      return;
    }
    this.dbIsLoading &#x3D; true;
    this.db &#x3D; await openDB(DATABASE_NAME, 2, {
      upgrade(db) {
        db.createObjectStore(&#x27;files&#x27;);
      },
    });
    this.dbIsReady &#x3D; true;
    this.dbIsLoading &#x3D; false;
  }

  private async isFileCached(filename: string): Promise&lt;boolean&gt; {
    if (!this.dbIsReady) {
      await this.prepareDatabase();
    }
    const readTransaction &#x3D; this.db.transaction(&#x27;files&#x27;, &#x27;readonly&#x27;);
    const readStore &#x3D; readTransaction.objectStore(&#x27;files&#x27;);
    const result &#x3D; await readStore.get(filename);
    return !!result;
  }

  private async cacheFile(filename: string, blob: Blob) {
    if (!this.dbIsReady) {
      await this.prepareDatabase();
    }
    const readWriteTransaction &#x3D; this.db.transaction(&#x27;files&#x27;, &#x27;readwrite&#x27;);
    const readWriteStore &#x3D; readWriteTransaction.objectStore(&#x27;files&#x27;);
    await readWriteStore.put(blob, filename);
  }

  private async getCachedFile(filename: string): Promise&lt;Blob&gt; {
    if (!this.dbIsReady) {
      await this.prepareDatabase();
    }
    const readTransaction &#x3D; this.db.transaction(&#x27;files&#x27;, &#x27;readonly&#x27;);
    const readStore &#x3D; readTransaction.objectStore(&#x27;files&#x27;);
    const result &#x3D; await readStore.get(filename);
    return new Blob([result], { type: &quot;application/json&quot; });
  }

  public findClosestObjects(inputVector: number[]): ArticleListCollection {
    let ret: ArticleListCollection &#x3D; new ArticleListCollection();
    for (let article of this.article_ratings()) {
      let ali: ArticleListItem &#x3D; {
        id: article.i,
        rating: article.r,
        distance: euclideanDistance(article.r, inputVector),
      };
      ret.add(ali);
    }
    return ret;
  }

  public findClosestObjectsForSearchTerm(searchString: string): ArticleListCollection {
    const rating &#x3D; this.get_rating_for_text(searchString);
    if (norm_of_vector(rating) &lt; 0.01) {
      return new ArticleListCollection();
    }
    let ret &#x3D; this.findClosestObjects(rating);
    console.log(ret);
    return ret;
  }

  fetchArticles(ids: string[]): Observable&lt;PubmedArticle[]&gt; {
    let id_string &#x3D; ids[0];
    for (let i &#x3D; 1; i &lt; ids.length; i++) {
      id_string +&#x3D; &quot;,&quot; + ids[i];
    }

    const params &#x3D; new HttpParams()
      .set(&#x27;db&#x27;, &#x27;pmc&#x27;)
      .set(&#x27;id&#x27;, id_string)
      .set(&#x27;retmode&#x27;, &#x27;xml&#x27;);

    return this.http.get(this.baseUrl, { params, responseType: &#x27;text&#x27; }).pipe(
      map(response &#x3D;&gt; this.parseXml(response, ids))
    );
  }

  private parseXml(xmlString: string, ids: string[]): PubmedArticle[] {
    const parser &#x3D; new DOMParser();
    const xmlDoc &#x3D; parser.parseFromString(xmlString, &#x27;application/xml&#x27;);

    const article_elements &#x3D; xmlDoc.getElementsByTagName(&quot;article&quot;);
    let ret: PubmedArticle[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; article_elements.length; i++) {
      let art &#x3D; this.parseArticle(article_elements.item(i)!);
      art.id &#x3D; ids[i];
      ret.push(art);
    }
    return ret;
  }

  private parseArticle(xmlDoc: Element): PubmedArticle {
    const article: PubmedArticle &#x3D; {
      title: this.getTextContent(xmlDoc, &#x27;article-title&#x27;),
      abstract: this.getTextContent(xmlDoc, &#x27;abstract&#x27;),
      authors: this.getAuthorList(xmlDoc),
      journal: this.getTextContent(xmlDoc, &#x27;journal-title&#x27;),
      pubDate: this.getTextContent(xmlDoc, &#x27;pub-date&#x27;),
      id: this.getTextContent(xmlDoc, &#x27;PMID&#x27;)
    };
    return article;
  }

  private getTextContent(xmlDoc: Element, tagName: string): string {
    const element &#x3D; xmlDoc.getElementsByTagName(tagName)[0];
    return element ? element.textContent || &#x27;&#x27; : &#x27;&#x27;;
  }

  private getAuthorList(xmlDoc: Element): string[] {
    const authorElements &#x3D; xmlDoc.getElementsByTagName(&#x27;contrib&#x27;);
    const authors: string[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; authorElements.length; i++) {
      let temp_element &#x3D; authorElements[i].getElementsByTagName(&#x27;surname&#x27;)[0];
      const lastName &#x3D; temp_element ? temp_element.textContent || &#x27;&#x27; : &#x27;&#x27;;
      temp_element &#x3D; authorElements[i].getElementsByTagName(&#x27;given-names&#x27;)[0];
      const firstName &#x3D; temp_element ? temp_element.textContent || &#x27;&#x27; : &#x27;&#x27;;
      authors.push(&#x60;${firstName} ${lastName}&#x60;);
    }
    return authors;
  }
}

</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'HcseDataService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
